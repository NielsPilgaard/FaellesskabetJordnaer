@inherits LayoutComponentBase

@inject NavigationManager Navigation

<MudThemeProvider Theme="JordnaerTheme.CustomTheme" />

<MudLayout>
    <MudAppBar Fixed="false" Elevation="0" Dense Style="background: var(--mud-palette-background-grey)">
        <MudIconButton Href="/users" Title="Personer" Icon="@Icons.Material.Filled.PersonSearch" />
        <MudIconButton Href="/groups" Title="Grupper" Icon="@Icons.Material.Filled.Groups" />

        @if (!_currentPageIsFrontPage)
        {
	        <MudSpacer />

	        <MudLink Href="/">
		        <MudImage Class="d-flex" Src="/images/mini_logo_small.png" Alt="Logo" />
	        </MudLink>
        }

        <MudSpacer />
        <AuthorizeView>
            <Authorized>
                <MudIconButton Title="Redigér Profil" Href="profile" Icon="@Icons.Material.Filled.Person" />
                <MudIconButton Title="Log af" Href="Account/Logout" Icon="@Icons.Material.Filled.Logout" />
            </Authorized>
            <NotAuthorized>
                <MudIconButton Title="Log ind" Href="/Account/Login" Icon="@Icons.Material.Filled.Login" Variant="Variant.Outlined" Color="Color.Default" />
            </NotAuthorized>
        </AuthorizeView>
    </MudAppBar>
    @Body
    <MudSpacer />
    <Footer></Footer>
</MudLayout>

<BlazorErrorFooter />

@code
{
    private bool _currentPageIsFrontPage;

    protected override void OnInitialized()
    {
        _currentPageIsFrontPage = Navigation.Uri == Navigation.BaseUri || Navigation.Uri == $"{Navigation.BaseUri}#_=_";
    }
}
