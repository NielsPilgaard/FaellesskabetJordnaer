@using Jordnaer.Client.Features.Authentication
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication

<MudAppBar Class="auth" Fixed="false" Dense Elevation="5" Style="@_appBarStyle">
    <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@ToggleDrawer.InvokeAsync" />
    <MudSpacer />
    <MudButton Class="d-none d-sm-flex" Color="Color.Inherit" Href="/">
        <MudText Typo="Typo.h4" Class="font-cherry-bomb-one">Mini MÃ¸der</MudText>
    </MudButton>
    <MudSpacer />
    <ThemeProvider @bind-IsDarkMode="_isDarkMode" />
    <AuthorizeView>
      <Authorized>
        <TopBarProfileMenu @bind-IsDarkMode="_isDarkMode" />
      </Authorized>
        <NotAuthorized>
            <MudIconButton Icon="@Icons.Material.Filled.Login" Href="auth/login" Variant="Variant.Filled" Color="Color.Tertiary" />
        </NotAuthorized>
    </AuthorizeView>
</MudAppBar>

@code
{
    [Parameter]
    public EventCallback<bool> ToggleDrawer { get; set; }

    private bool _isDarkMode = true;

    private readonly string _appBarStyle = $"background: linear-gradient(90deg, {Colors.Teal.Darken2} 0%, {Colors.Teal.Darken3} 35%);";
}
