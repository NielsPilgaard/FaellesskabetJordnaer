@using Jordnaer.Client.Features.Authentication
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication

<ThemeProvider @bind-IsDarkMode="_isDarkMode"/>

<MudAppBar Fixed="false" Elevation="0" Dense Style="background: var(--mud-palette-background-grey)">

    <AuthorizeView>
        <Authorized>
            <MudIconButton Icon="@Icons.Material.Filled.Menu"
                           Color="Color.Default"
                           Variant="Variant.Filled"
                           Edge="Edge.Start"
                           OnClick="@ToggleDrawer.InvokeAsync"
                           Class="mr-10"/>
        </Authorized>
    </AuthorizeView>

    <MudLink Href="/">
        <MudImage Height="40" Class="d-flex" Src="/images/mini_logo.png" loading="lazy" Alt="Logo" />
    </MudLink>

    <MudSpacer/>


    <AuthorizeView>
        <Authorized>
            <TopBarProfileMenu @bind-IsDarkMode="_isDarkMode"/>
        </Authorized>
        <NotAuthorized>
            <MudIconButton Icon="@Icons.Material.Filled.Login" Href="auth/login" Variant="Variant.Filled" Color="Color.Tertiary"/>
        </NotAuthorized>
    </AuthorizeView>
</MudAppBar>

@code
{
    [Parameter]
    public EventCallback<bool> ToggleDrawer { get; set; }

    private bool _isDarkMode = true;

    private readonly string _appBarStyle = $"background: linear-gradient(90deg, {Colors.Teal.Darken2} 0%, {Colors.Teal.Darken3} 35%);";
}
