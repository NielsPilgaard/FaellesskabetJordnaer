@inject IUserSearchClient UserSearchClient


<MudAutocomplete T="string"
                 Label="SÃ¸g efter bruger"
                 @bind-Value="_searchString"
                 SearchFuncWithCancel="@SearchForUsers"
                 SelectValueOnTab
                 ShowProgressIndicator
                 OpenIcon="@string.Empty"
                 DebounceInterval="1000"
                 Clearable
                 MinCharacters="2" />


@code {

    private string? _searchString;

    private async Task<IEnumerable<string>> SearchForUsers(string arg1, CancellationToken arg2)
    {
        var searchResponse = await UserSearchClient.GetUsersWithAutoComplete(_searchString, arg2);

        return searchResponse.IsSuccessStatusCode
            ? searchResponse.Content!.Select(response => response.ToString())
            : Array.Empty<string>();
    }

}
